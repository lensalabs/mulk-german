---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Mulk 30">
  <div class="min-h-screen flex flex-col items-center justify-center px-6 py-12 bg-[var(--color-background)]">
    <div class="w-full max-w-sm text-center">
      
      <!-- Logo -->
      <img src="/logo-stacked.svg" alt="Mulk 30" class="w-48 mx-auto mb-8" />
      
      <!-- Tagline -->
      <p class="text-[var(--color-text-secondary)] mb-10">Lerne Sure Al-Mulk in 30 Tagen</p>
      
      <!-- Login Options -->
      <div class="space-y-3">
        <!-- Email Login -->
        <a href="/auth/email" class="w-full flex items-center justify-center gap-3 py-4 px-6 bg-[var(--color-primary)] text-white rounded-xl font-medium hover:opacity-90 active:scale-[0.98] transition-all">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
          </svg>
          Weiter mit E-Mail
        </a>
        
        <!-- Divider -->
        <div class="flex items-center gap-3 my-2">
          <div class="flex-1 h-px bg-[var(--color-border)]"></div>
          <span class="text-xs text-[var(--color-text-secondary)]">oder</span>
          <div class="flex-1 h-px bg-[var(--color-border)]"></div>
        </div>
        
        <!-- Guest Mode -->
        <button id="guest-btn" class="w-full flex flex-col items-center justify-center gap-1 py-4 px-6 bg-[var(--color-primary)]/10 border border-[var(--color-primary)]/30 rounded-xl hover:bg-[var(--color-primary)]/20 active:scale-[0.98] transition-all">
          <span class="flex items-center gap-2 font-medium text-[var(--color-primary)]">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
            </svg>
            Als Gast fortfahren
          </span>
          <span class="text-xs text-[var(--color-text-secondary)]">Fortschritt wird nicht gespeichert</span>
        </button>
      </div>
      
      <!-- Footer -->
      <p class="mt-10 text-xs text-[var(--color-text-secondary)]">
        Eine 30-Tage Quran Challenge
      </p>
      
      <div class="mt-4 flex justify-center gap-3 text-xs text-[var(--color-text-secondary)]">
        <a href="/impressum" class="hover:text-[var(--color-primary)]">Impressum</a>
        <span>|</span>
        <a href="/datenschutz" class="hover:text-[var(--color-primary)]">Datenschutz</a>
      </div>
      
    </div>
  </div>
</Layout>

<script>
  import { signInAsGuest, getSession } from '../lib/supabase';
  
  // Check if already logged in
  (async () => {
    const { session } = await getSession();
    if (session) {
      window.location.href = '/app';
    }
  })();
  
  document.getElementById('guest-btn')?.addEventListener('click', async () => {
    await signInAsGuest();
  });
</script>
